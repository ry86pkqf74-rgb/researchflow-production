# ResearchFlow Production Environment Configuration
# =================================================
# Copy this file to .env and fill in your values
#
# ⚠️  SECURITY WARNING: Never commit .env files to version control!
# ⚠️  PRODUCTION: Change ALL default passwords and secrets below!

# ==================
# Governance
# ==================
# DEMO = PHI reveal blocked, synthetic data only
# LIVE = Full PHI access with audit trail
GOVERNANCE_MODE=DEMO

# ==================
# Database
# ==================
# ⚠️  PRODUCTION: Use strong, unique credentials!
DATABASE_URL=postgresql://ros:ros@postgres:5432/ros
POSTGRES_USER=ros
POSTGRES_PASSWORD=ros
POSTGRES_DB=ros

# ==================
# Redis
# ==================
REDIS_URL=redis://redis:6379

# ==================
# Node.js Orchestrator
# ==================
NODE_ENV=development
PORT=3001
WORKER_CALLBACK_URL=http://worker:8000

# Session/JWT Configuration
# ⚠️  CRITICAL: Generate strong random secrets for production!
# Example: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-CHANGE-IN-PRODUCTION
SESSION_SECRET=your-session-secret-CHANGE-IN-PRODUCTION
JWT_EXPIRATION=24h

# ==================
# Python Worker
# ==================
PYTHONPATH=/app/src:/app
PYTHONUNBUFFERED=1
ARTIFACT_PATH=/data/artifacts
LOG_PATH=/data/logs
MANIFEST_PATH=/data/manifests

# ==================
# AI Integration
# ==================
# Anthropic API Key (required for AI features)
ANTHROPIC_API_KEY=sk-ant-your-key-here

# OpenAI API Key (optional, for embeddings)
OPENAI_API_KEY=sk-your-key-here

# AI Router Configuration
AI_DEFAULT_TIER=MINI
AI_ENABLE_PROMPT_CACHE=true
AI_CACHE_TTL_SECONDS=3600

# Cost Limits (USD per day)
AI_DAILY_COST_LIMIT=100.00
AI_PER_REQUEST_LIMIT=5.00

# ==================
# PHI Detection
# ==================
PHI_SCAN_ENABLED=true
PHI_REVEAL_TOKEN_TTL_MINUTES=15
PHI_AUDIT_RETENTION_DAYS=365

# ==================
# File Upload
# ==================
MAX_UPLOAD_SIZE_MB=100
ALLOWED_EXTENSIONS=.csv,.xlsx,.json,.parquet
UPLOAD_PATH=/data/uploads

# ==================
# Logging
# ==================
LOG_LEVEL=info
LOG_FORMAT=json

# ==================
# Feature Flags
# ==================
FEATURE_BATCH_PROCESSING=true
FEATURE_EVIDENCE_RETRIEVAL=true
FEATURE_AUTO_ESCALATION=true

# Phase F: UI/UX Enhancement Flags (Tasks 101-110)
FEATURE_CUSTOM_FIELDS=false
FEATURE_ROLE_ADAPTIVE_NAV=false
FEATURE_VOICE_COMMANDS=false
FEATURE_XR_PREVIEW=false
FEATURE_SEMANTIC_SEARCH=false
FEATURE_INLINE_TUTORIALS=false
FEATURE_ACCESSIBILITY_MODE=false
FEATURE_DOMAIN_THEMES=false
FEATURE_GAMIFICATION_BADGES=false

# Phase F: Frontend Feature Flags (client-side)
VITE_FEATURE_CUSTOM_FIELDS=false
VITE_FEATURE_VOICE_COMMANDS=false
VITE_FEATURE_XR_PREVIEW=false
VITE_FEATURE_INLINE_TUTORIALS=false
VITE_FEATURE_DOMAIN_THEMES=false

# ==================
# External Services (Production)
# ==================
# S3 for artifact storage (optional)
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_S3_BUCKET=researchflow-artifacts
# AWS_REGION=us-east-1

# Sentry for error tracking (optional)
# SENTRY_DSN=

# DataDog for monitoring (optional)
# DD_API_KEY=
# DD_SERVICE=researchflow

# ==================
# Phase C: Literature Search (Tasks 41-42)
# ==================
# PubMed E-utilities API
NCBI_API_KEY=
NCBI_TOOL=researchflow
NCBI_EMAIL=

# Semantic Scholar API
SEMANTIC_SCHOLAR_API_KEY=

# Literature cache TTL (seconds)
LITERATURE_CACHE_TTL_SECONDS=86400

# ==================
# Caching (Phase 04)
# ==================
# Literature Search Cache
LIT_CACHE_ENABLED=true
LIT_CACHE_TTL_SECONDS=86400
LIT_CACHE_MAXSIZE=1000

# IRB Draft Cache (disabled by default for PHI safety)
IRB_DRAFT_CACHE_ENABLED=false
IRB_DRAFT_CACHE_TTL_SECONDS=3600
IRB_DRAFT_CACHE_MAXSIZE=100

# AI Response Cache
AI_RESPONSE_CACHE_ENABLED=true
AI_RESPONSE_CACHE_TTL_SECONDS=21600
AI_RESPONSE_CACHE_BACKEND=memory

# ==================
# ROS Gateway (Phase 03)
# ==================
ROS_PROXY_ENABLED=true
WORKER_URL=http://worker:8000
ROS_PROXY_TIMEOUT_MS=120000

# ==================
# Streaming (Phase 07)
# ==================
AI_STREAMING_ENABLED=false
AI_STREAMING_IDLE_TIMEOUT_MS=30000
VITE_AI_STREAMING_ENABLED=false

# ==================
# Observability (Phase 08)
# ==================
METRICS_ENABLED=true
UVICORN_WORKERS=1

# ==================
# Phase C: Vector Database (Task 44)
# ==================
# Chroma persistence directory
CHROMA_PERSIST_DIR=/data/chroma

# Embeddings provider (openai, local, mock)
EMBEDDINGS_PROVIDER=openai
EMBEDDINGS_MODEL=text-embedding-3-small

# ==================
# Phase C: Feature Flags (Heavy Components)
# ==================
# OCR with Tesseract (Task 50)
OCR_ENABLED=false
OCR_LANG=eng

# scispaCy NLP (Task 51)
SCISPACY_ENABLED=false
SCISPACY_MODEL=en_core_sci_sm

# Data profiling with ydata-profiling (Task 53)
PROFILING_ENABLED=false

# Audio transcription with Whisper (Task 56)
TRANSCRIPTION_ENABLED=false
WHISPER_MODEL=small

# Dask parallelization (Task 59)
DASK_ENABLED=false
DASK_WORKERS=4
DASK_THREADS_PER_WORKER=2
DASK_MEMORY_LIMIT=4GB

# ==================
# Development Only
# ==================
# Enable hot reload
HOT_RELOAD=true

# Verbose SQL logging
SQL_LOGGING=false

# Mock external services
MOCK_AI_RESPONSES=false
MOCK_FHIR_CONNECTOR=true

# ==================
# LLM Extraction System (Clinical Data Extraction)
# ==================
# AI Provider Keys (at least ANTHROPIC_API_KEY required for extraction)
ANTHROPIC_API_KEY=sk-ant-api03-...
OPENAI_API_KEY=sk-...
TOGETHER_API_KEY=...
XAI_API_KEY=...

# NLM/NCBI for MeSH term enrichment
NCBI_API_KEY=...

# Extraction Service Settings
AI_ROUTER_URL=http://orchestrator:3001/api/ai/route
ORCHESTRATOR_URL=http://orchestrator:3001
EXTRACTION_TIMEOUT_SECONDS=60
ENRICHMENT_TIMEOUT_SECONDS=30
