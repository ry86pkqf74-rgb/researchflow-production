# ResearchFlow Production Environment Configuration
# =================================================
# Copy this file to .env and fill in your values

# ==================
# Governance
# ==================
# DEMO = PHI reveal blocked, synthetic data only
# LIVE = Full PHI access with audit trail
GOVERNANCE_MODE=DEMO

# ==================
# Database
# ==================
DATABASE_URL=postgresql://ros:ros@postgres:5432/ros
POSTGRES_USER=ros
POSTGRES_PASSWORD=ros
POSTGRES_DB=ros

# ==================
# Redis
# ==================
REDIS_URL=redis://redis:6379

# ==================
# Node.js Orchestrator
# ==================
NODE_ENV=development
PORT=3001
WORKER_CALLBACK_URL=http://worker:8000

# Session/JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-in-production
SESSION_SECRET=your-session-secret-change-in-production
JWT_EXPIRATION=24h

# ==================
# Python Worker
# ==================
PYTHONPATH=/app/src:/app
PYTHONUNBUFFERED=1
ARTIFACT_PATH=/data/artifacts
LOG_PATH=/data/logs
MANIFEST_PATH=/data/manifests

# ==================
# AI Integration
# ==================
# Anthropic API Key (required for AI features)
ANTHROPIC_API_KEY=sk-ant-your-key-here

# OpenAI API Key (optional, for embeddings)
OPENAI_API_KEY=sk-your-key-here

# AI Router Configuration
AI_DEFAULT_TIER=MINI
AI_ENABLE_PROMPT_CACHE=true
AI_CACHE_TTL_SECONDS=3600

# Cost Limits (USD per day)
AI_DAILY_COST_LIMIT=100.00
AI_PER_REQUEST_LIMIT=5.00

# ==================
# PHI Detection
# ==================
PHI_SCAN_ENABLED=true
PHI_REVEAL_TOKEN_TTL_MINUTES=15
PHI_AUDIT_RETENTION_DAYS=365

# ==================
# File Upload
# ==================
MAX_UPLOAD_SIZE_MB=100
ALLOWED_EXTENSIONS=.csv,.xlsx,.json,.parquet
UPLOAD_PATH=/data/uploads

# ==================
# Logging
# ==================
LOG_LEVEL=info
LOG_FORMAT=json

# ==================
# Feature Flags
# ==================
FEATURE_BATCH_PROCESSING=true
FEATURE_EVIDENCE_RETRIEVAL=true
FEATURE_AUTO_ESCALATION=true

# ==================
# External Services (Production)
# ==================
# S3 for artifact storage (optional)
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_S3_BUCKET=researchflow-artifacts
# AWS_REGION=us-east-1

# Sentry for error tracking (optional)
# SENTRY_DSN=
# SENTRY_TRACES_SAMPLE_RATE=0.1
# RELEASE_VERSION=

# DataDog for monitoring (optional)
# DD_API_KEY=
# DD_SERVICE=researchflow

# ==================
# Database Read Replicas (optional)
# ==================
# READONLY_DATABASE_URL=postgresql://ros:ros@postgres-replica:5432/ros

# ==================
# Storage Backend
# ==================
# Options: local, s3
STORAGE_BACKEND=local
# S3_ENDPOINT=http://minio:9000  # For MinIO
# S3_FORCE_PATH_STYLE=true       # Required for MinIO
# STORAGE_ENCRYPTION=true

# ==================
# External Integrations
# ==================
# Jira
# JIRA_WEBHOOK_SECRET=

# Zapier
# ZAPIER_WEBHOOK_SECRET=
# ZAPIER_TOKEN=

# ==================
# Hyperledger Fabric (Immutable Audit)
# ==================
# FABRIC_CONNECTION_PROFILE=/path/to/connection-profile.json
# FABRIC_CHANNEL=researchflow-audit
# FABRIC_CHAINCODE=audit-chaincode

# ==================
# Development Only
# ==================
# Enable hot reload
HOT_RELOAD=true

# Verbose SQL logging
SQL_LOGGING=false

# Mock external services
MOCK_AI_RESPONSES=false
MOCK_FHIR_CONNECTOR=true
